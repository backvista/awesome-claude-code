---
name: acc-analyze-ci-config
description: –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ CI/CD –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏. –û–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã –≤ —Ñ–∞–π–ª–∞—Ö GitHub Actions –∏ GitLab CI, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏, —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.
---

# –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä CI –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π

–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç CI/CD –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –ø—Ä–æ–±–ª–µ–º, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π –∏ –ª—É—á—à–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫.

## –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∞–Ω–∞–ª–∏–∑–∞

### 1. –ê–Ω–∞–ª–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    –ê–ù–ê–õ–ò–ó CI –ö–û–ù–§–ò–ì–ê                            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                 ‚îÇ
‚îÇ  ‚úì –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —Å—Ç–∞–¥–∏–∏: install ‚Üí lint ‚Üí test ‚Üí build ‚Üí deploy   ‚îÇ
‚îÇ  ‚úì Jobs –ø—Ä–∞–≤–∏–ª—å–Ω–æ —É–ø–æ—Ä—è–¥–æ—á–µ–Ω—ã                                   ‚îÇ
‚îÇ  ‚úó –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª—å concurrency                             ‚îÇ
‚îÇ  ‚úó –ù–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω timeout                                          ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 2. –ê–Ω–∞–ª–∏–∑ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

| –ü—Ä–æ–±–ª–µ–º–∞ | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å | –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|-------|----------|----------|----------------|
| –ù–µ—Ç Composer –∫–µ—à–∞ | üü† Major | `lint` job | –î–æ–±–∞–≤–∏—Ç—å `actions/cache` –¥–ª—è `~/.composer/cache` |
| –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π –∫–ª—é—á –∫–µ—à–∞ | üü° Minor | Line 23 | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `hashFiles('composer.lock')` |
| –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç vendor –∫–µ—à | üü† Major | –í—Å–µ jobs | –î–µ–ª–∏—Ç—å—Å—è vendor –º–µ–∂–¥—É jobs —á–µ—Ä–µ–∑ artifacts |

### 3. –ê–Ω–∞–ª–∏–∑ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

| –ü—Ä–æ–±–ª–µ–º–∞ | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å | –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ | –†–∏—Å–∫ |
|-------|----------|----------|------|
| –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `pull_request_target` | üî¥ Critical | Line 5 | Code injection –∏–∑ forks |
| Secrets –≤ –ª–æ–≥–∞—Ö | üî¥ Critical | Line 45 | `echo ${{ secrets.API_KEY }}` —Ä–∞—Å–∫—Ä—ã—Ç |
| –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ actions | üü† Major | Lines 12, 18 | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `@v1` –≤–º–µ—Å—Ç–æ `@v4` |
| –ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã permissions | üü° Minor | - | –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (write-all) |

## –ê–Ω–∞–ª–∏–∑ GitHub Actions

### –ß–µ–∫-–ª–∏—Å—Ç

```markdown
## –û—Ç—á—ë—Ç –∞–Ω–∞–ª–∏–∑–∞ GitHub Actions

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: `.github/workflows/ci.yml`

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚úì
- [x] –í–∞–ª–∏–¥–Ω—ã–π YAML —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
- [x] –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ job (needs)
- [ ] –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è concurrency
- [ ] –û–ø—Ä–µ–¥–µ–ª—ë–Ω timeout –¥–ª—è jobs
- [x] –¢—Ä–∏–≥–≥–µ—Ä—ã workflow –ø–æ–¥—Ö–æ–¥—è—â–∏–µ

#### –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ ‚ö†Ô∏è
- [ ] –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Composer –∑–∞–∫–µ—à–∏—Ä–æ–≤–∞–Ω—ã
- [ ] Node modules –∑–∞–∫–µ—à–∏—Ä–æ–≤–∞–Ω—ã (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)
- [x] Docker layer caching
- [ ] –ö–ª—é—á–∏ –∫–µ—à–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ö–µ—à–∏ —Ñ–∞–π–ª–æ–≤

#### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å üî¥
- [ ] Permissions —è–≤–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã
- [ ] Secrets –Ω–µ –≤—ã–≤–æ–¥—è—Ç—Å—è
- [x] Actions –∑–∞–∫—Ä–µ–ø–ª–µ–Ω—ã –∫ SHA
- [ ] pull_request_target –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

#### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å ‚ö†Ô∏è
- [ ] Jobs –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
- [x] Matrix —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–ª—è –≤–µ—Ä—Å–∏–π PHP
- [ ] Fail-fast –æ—Ç–∫–ª—é—á—ë–Ω –¥–ª—è matrix
- [ ] Artifacts –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –º–µ–∂–¥—É jobs

#### –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ ‚úì
- [x] –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ action
- [x] Environment –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- [ ] –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ workflows
- [x] –ü–æ–Ω—è—Ç–Ω—ã–µ –∏–º–µ–Ω–∞ jobs
```

### –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### 1. –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π Concurrency

```yaml
# ‚ùå –ü–õ–û–•–û: –ù–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª—è concurrency
name: CI
on: [push, pull_request]

# ‚úÖ –•–û–†–û–®–û: –û—Ç–º–µ–Ω–∞ –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö –∑–∞–ø—É—Å–∫–æ–≤
name: CI
on: [push, pull_request]

concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true
```

#### 2. –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

```yaml
# ‚ùå –ü–õ–û–•–û: –ö–ª—é—á –∫–µ—à–∞ –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç lock file
- uses: actions/cache@v4
  with:
    path: vendor
    key: vendor-${{ github.sha }}

# ‚úÖ –•–û–†–û–®–û: –ö–ª—é—á –∫–µ—à–∞ –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ lock file
- uses: actions/cache@v4
  with:
    path: |
      ~/.composer/cache
      vendor
    key: composer-${{ hashFiles('composer.lock') }}
    restore-keys: composer-
```

#### 3. –ü—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

```yaml
# ‚ùå –ü–õ–û–•–û: –û–ø–∞—Å–Ω–æ —Å forks
on:
  pull_request_target:
    types: [opened]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          ref: ${{ github.event.pull_request.head.sha }}  # –í—ã–ø–æ–ª–Ω—è–µ—Ç –Ω–µ–¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –∫–æ–¥

# ‚úÖ –•–û–†–û–®–û: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–æ–≤–µ—Ä–µ–Ω–Ω–æ–≥–æ/–Ω–µ–¥–æ–≤–µ—Ä–µ–Ω–Ω–æ–≥–æ
on:
  pull_request:  # –ë–µ–∑–æ–ø–∞—Å–Ω–æ: –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ base
```

## –ê–Ω–∞–ª–∏–∑ GitLab CI

### –ß–µ–∫-–ª–∏—Å—Ç

```markdown
## –û—Ç—á—ë—Ç –∞–Ω–∞–ª–∏–∑–∞ GitLab CI

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: `.gitlab-ci.yml`

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚úì
- [x] –í–∞–ª–∏–¥–Ω—ã–π YAML —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
- [x] –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —Å—Ç–∞–¥–∏–∏
- [x] Jobs –Ω–∞–∑–Ω–∞—á–µ–Ω—ã –Ω–∞ —Å—Ç–∞–¥–∏–∏
- [ ] –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- [x] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω default image

#### –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ ‚ö†Ô∏è
- [ ] –ö–ª—é—á –∫–µ—à–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ö–µ—à —Ñ–∞–π–ª–æ–≤
- [ ] Cache policy –ø–æ–¥—Ö–æ–¥—è—â–∏–π (pull/push)
- [x] –ü—É—Ç–∏ –∫–µ—à–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ
- [ ] Artifacts –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è sharing –º–µ–∂–¥—É jobs

#### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å ‚ö†Ô∏è
- [x] Secrets –≤ CI/CD –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (–Ω–µ –≤ –∫–æ–¥–µ)
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã protected branches
- [ ] –ù–µ—Ç —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ artifacts
- [x] Image –∏–∑ –¥–æ–≤–µ—Ä–µ–Ω–Ω–æ–≥–æ registry

#### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å ‚ö†Ô∏è
- [ ] Jobs –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
- [x] –ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ needs –¥–ª—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- [ ] Rules/only –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] –í–∫–ª—é—á—ë–Ω DAG —Ä–µ–∂–∏–º

#### –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ ‚úì
- [x] –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è extends –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- [x] –ü–æ–Ω—è—Ç–Ω—ã–µ –∏–º–µ–Ω–∞ jobs
- [ ] Include –¥–ª—è –º–æ–¥—É–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ñ–∏–≥–∞
- [x] –ü–æ–¥—Ö–æ–¥—è—â–∏–µ timeouts
```

### –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### 1. –ö–ª—é—á –∫–µ—à–∞ –±–µ–∑ —Ö–µ—à–∞

```yaml
# ‚ùå –ü–õ–û–•–û: –ö–µ—à –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
cache:
  key: composer-cache
  paths:
    - vendor/

# ‚úÖ –•–û–†–û–®–û: –ö–µ—à –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ lock
cache:
  key:
    files:
      - composer.lock
  paths:
    - vendor/
```

#### 2. –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π Needs

```yaml
# ‚ùå –ü–õ–û–•–û: –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∞–¥–∏–∏, –Ω–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞
stages:
  - lint
  - test

phpstan:
  stage: lint
  script: vendor/bin/phpstan

phpunit:
  stage: test  # –ñ–¥—ë—Ç –í–°–ï lint jobs

# ‚úÖ –•–û–†–û–®–û: DAG —Å needs
phpunit:
  stage: test
  needs: [composer-install]  # –ñ–¥—ë—Ç —Ç–æ–ª—å–∫–æ install
```

## –§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞ –∞–Ω–∞–ª–∏–∑–∞

```markdown
# –ê–Ω–∞–ª–∏–∑ CI/CD –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–§–∞–π–ª:** `.github/workflows/ci.yml`
**–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:** GitHub Actions
**–î–∞—Ç–∞:** 2024-01-15

## –°–≤–æ–¥–∫–∞

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –°—Ç–∞—Ç—É—Å | –ü—Ä–æ–±–ª–µ–º—ã |
|----------|--------|--------|
| –°—Ç—Ä—É–∫—Ç—É—Ä–∞ | ‚úÖ Good | 0 |
| –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ | ‚ö†Ô∏è Warning | 3 |
| –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å | üî¥ Critical | 2 |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | ‚ö†Ô∏è Warning | 4 |
| –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ | ‚úÖ Good | 1 |

**–í—Å–µ–≥–æ –ø—Ä–æ–±–ª–µ–º:** 10 (2 Critical, 4 Major, 4 Minor)

## –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### SEC-001: –†–∞—Å–∫—Ä—ã—Ç—ã–π Secret –≤ –ª–æ–≥–∞—Ö
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** Line 45
**–ö–æ–¥:**
```yaml
- run: echo "Deploying with ${{ secrets.DEPLOY_KEY }}"
```
**–†–∏—Å–∫:** Secret –≤–∏–¥–µ–Ω –≤ –ª–æ–≥–∞—Ö workflow
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```yaml
- run: echo "Deploying..."
  env:
    DEPLOY_KEY: ${{ secrets.DEPLOY_KEY }}
```

### SEC-002: pull_request_target —Å Checkout
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** Lines 3, 15
**–†–∏—Å–∫:** –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ –∏–∑ forks
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ `pull_request` –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ, –∏–ª–∏ –Ω–µ –¥–µ–ª–∞—Ç—å checkout PR-–∫–æ–¥–∞

## –ö—Ä—É–ø–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### CACHE-001: –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π Composer –∫–µ—à
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `lint` job
**–í–ª–∏—è–Ω–∏–µ:** +2-3 –º–∏–Ω—É—Ç—ã –Ω–∞ –∑–∞–ø—É—Å–∫
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```yaml
- uses: actions/cache@v4
  with:
    path: ~/.composer/cache
    key: composer-${{ hashFiles('composer.lock') }}
```

### PERF-001: –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ jobs –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `test-unit`, `test-integration`
**–í–ª–∏—è–Ω–∏–µ:** +5 –º–∏–Ω—É—Ç –≤—Å–µ–≥–æ
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –£–±—Ä–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å `needs` –º–µ–∂–¥—É test jobs

## –ù–µ–±–æ–ª—å—à–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### BP-001: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–µ–π –≤–µ—Ä—Å–∏–∏ Action
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** Line 12
**–¢–µ–∫—É—â–∞—è:** `actions/checkout@v2`
**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è:** `actions/checkout@v4`

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ SEC-001 –∏ SEC-002
2. **–ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —É–ª—É—á—à–µ–Ω–∏—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
3. **–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ:** –†–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

## –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–°–º. [–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ A](#appendix-a) –¥–ª—è –ø–æ–ª–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.
```

## –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∞–Ω–∞–ª–∏–∑—É

1. **–†–∞–∑–æ–±—Ä–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
   - –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å YAML —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
   - –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–ª–∞—Ç—Ñ–æ—Ä–º—É (GitHub/GitLab)
   - –ò–∑–≤–ª–µ—á—å jobs, stages, triggers

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É:**
   - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ job
   - –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (needs/stages)
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ concurrency
   - Timeouts

3. **–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –ö–ª—é—á–∏ –∫–µ—à–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ö–µ—à–∏ —Ñ–∞–π–ª–æ–≤
   - –ü–æ–¥—Ö–æ–¥—è—â–∏–µ –ø—É—Ç–∏ –∫–µ—à–∞
   - Cache policy (pull/push)
   - Artifacts –¥–ª—è sharing –º–µ–∂–¥—É jobs

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:**
   - –†–∞—Å–∫—Ä—ã—Ç–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤
   - Permissions
   - –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã
   - –í–µ—Ä—Å–∏–∏ action

5. **–ê—É–¥–∏—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**
   - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
   - –ù–µ–Ω—É–∂–Ω—ã–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ jobs
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è matrix
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ fail-fast

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–ü—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ:
- –ü—É—Ç—å –∫ CI –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º —Ñ–∞–π–ª–∞–º
- –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏ –¥–ª—è —Ñ–æ–∫—É—Å–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –±—É–¥–µ—Ç:
1. –ü–∞—Ä—Å–∏—Ç—å –∏ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
2. –ü—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ª—É—á—à–∏–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º
3. –ò–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –ø–æ –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏
4. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
5. –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
