---
name: acc-find-logic-errors
description: –û–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –≤ PHP-–∫–æ–¥–µ. –ù–∞—Ö–æ–¥–∏—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è, –Ω–µ–≤–µ—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã, –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ —Å–ª—É—á–∞–∏ switch, –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—É—é –ª–æ–≥–∏–∫—É, –ø—Ä–æ–±–ª–µ–º—ã —Å –∫–æ—Ä–æ—Ç–∫–∏–º –∑–∞–º—ã–∫–∞–Ω–∏–µ–º.
---

# –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫

–ê–Ω–∞–ª–∏–∑ PHP-–∫–æ–¥–∞ –Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏, –≤—ã–∑—ã–≤–∞—é—â–∏–µ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ.

## –ü–∞—Ç—Ç–µ—Ä–Ω—ã –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è

### 1. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã —Å—Ä–∞–≤–Ω–µ–Ω–∏—è

```php
// –ë–ê–ì: –ü—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ –≤–º–µ—Å—Ç–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
if ($status = 'active') { } // –î–æ–ª–∂–Ω–æ –±—ã—Ç—å ===

// –ë–ê–ì: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–∏–ø —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
if ($count == '0') { } // '0' —è–≤–ª—è–µ—Ç—Å—è –∏—Å—Ç–∏–Ω–Ω—ã–º –≤ —Å—Ç—Ä–æ–∫–æ–≤–æ–º —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏

// –ë–ê–ì: –û—à–∏–±–∫–∞ —É—Å–ª–æ–≤–∏—è –ô–æ–¥—ã
if ('active' = $status) { } // –û—à–∏–±–∫–∞ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è
```

### 2. –ò–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞

```php
// –ë–ê–ì: –ü—É—Ç–∞–Ω–∏—Ü–∞ —Å –¥–≤–æ–π–Ω—ã–º –æ—Ç—Ä–∏—Ü–∞–Ω–∏–µ–º
if (!$user->isNotActive()) { } // –°–ª–æ–∂–Ω–æ —Ä–∞—Å—Å—É–∂–¥–∞—Ç—å

// –ë–ê–ì: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –æ—Ç—Ä–∏—Ü–∞–Ω–∏—è
if (!$a && $b) { } // vs if (!($a && $b))

// –ë–ê–ì: –ù–∞—Ä—É—à–µ–Ω–∏–µ –∑–∞–∫–æ–Ω–∞ –î–µ –ú–æ—Ä–≥–∞–Ω–∞
if (!$a || !$b) { } // –ö–æ–≥–¥–∞ –∏–º–µ–µ—Ç—Å—è –≤ –≤–∏–¥—É !($a && $b)
```

### 3. –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ —Å–ª—É—á–∞–∏ Switch/Match

```php
// –ë–ê–ì: –ü—Ä–æ–ø—É—â–µ–Ω —Å–ª—É—á–∞–π enum
match ($status) {
    Status::Active => 'active',
    Status::Inactive => 'inactive',
    // –ü—Ä–æ–ø—É—â–µ–Ω—ã: Status::Pending, Status::Deleted
};

// –ë–ê–ì: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç default
switch ($type) {
    case 'A': return 1;
    case 'B': return 2;
    // –ù–µ—Ç default - –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –¥–ª—è –¥—Ä—É–≥–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π
}
```

### 4. –ü—Ä–æ–±–ª–µ–º—ã —Å –∫–æ—Ä–æ—Ç–∫–∏–º –∑–∞–º—ã–∫–∞–Ω–∏–µ–º

```php
// –ë–ê–ì: –ü–æ–±–æ—á–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç –≤ –∫–æ—Ä–æ—Ç–∫–æ–º –∑–∞–º—ã–∫–∞–Ω–∏–∏
if ($valid && $this->save()) { } // save() –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –µ—Å–ª–∏ !$valid

// –ë–ê–ì: –ü–æ—Ä—è–¥–æ–∫ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ
if ($obj->method() && $obj !== null) { } // –ü—Ä–æ–≤–µ—Ä–∫–∞ null —Å–ª–∏—à–∫–æ–º –ø–æ–∑–¥–Ω–æ
```

### 5. –û—à–∏–±–∫–∞ –Ω–∞ –µ–¥–∏–Ω–∏—Ü—É –≤ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è—Ö

```php
// –ë–ê–ì: –û—à–∏–±–∫–∞ fence post
if ($index < count($array)) { } // vs <=

// –ë–ê–ì: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –≥—Ä–∞–Ω–∏—Ü–∞
for ($i = 0; $i <= $length; $i++) { } // –ù–∞ –µ–¥–∏–Ω–∏—Ü—É –±–æ–ª—å—à–µ
```

### 6. –û—à–∏–±–∫–∏ –±—É–ª–µ–≤—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π

```php
// –ë–ê–ì: –í—Å–µ–≥–¥–∞ –∏—Å—Ç–∏–Ω–Ω–æ/–ª–æ–∂–Ω–æ
if ($age > 0 || $age <= 0) { } // –í—Å–µ–≥–¥–∞ –∏—Å—Ç–∏–Ω–Ω–æ

// –ë–ê–ì: –ù–µ–¥–æ—Å—Ç–∏–∂–∏–º–æ–µ —É—Å–ª–æ–≤–∏–µ
if ($x > 10 && $x < 5) { } // –í—Å–µ–≥–¥–∞ –ª–æ–∂–Ω–æ

// –ë–ê–ì: –ò–∑–±—ã—Ç–æ—á–Ω–æ–µ —É—Å–ª–æ–≤–∏–µ
if ($status === 'active' && $status !== 'inactive') { } // –í—Ç–æ—Ä–∞—è —á–∞—Å—Ç—å –∏–∑–±—ã—Ç–æ—á–Ω–∞
```

### 7. –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è

```php
// –ë–ê–ì: –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∞–∂–Ω–æ–≥–æ return
array_push($items, $new); // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç count, –Ω–µ array
$string->trim(); // String –Ω–µ–∏–∑–º–µ–Ω—è–µ–º, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É
```

## –ü–∞—Ç—Ç–µ—Ä–Ω—ã Grep

```bash
# –ü—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ –≤ —É—Å–ª–æ–≤–∏–∏
Grep: "if\s*\([^=]*[^!=<>]=[^=][^)]*\)" --glob "**/*.php"

# –î–≤–æ–π–Ω–æ–µ –æ—Ç—Ä–∏—Ü–∞–Ω–∏–µ
Grep: "!\$\w+->isNot|!!\$" --glob "**/*.php"

# –ü—É—Å—Ç–æ–π switch –±–µ–∑ default
Grep: "switch\s*\([^)]+\)\s*\{[^}]*\}" --glob "**/*.php"
```

## –§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞

```markdown
### –õ–æ–≥–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: [–û–ø–∏—Å–∞–Ω–∏–µ]

**–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å:** üî¥/üü†/üü°
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `file.php:line`
**–¢–∏–ø:** [Incorrect Operator|Inverted Logic|Missing Case|...]

**–ü—Ä–æ–±–ª–µ–º–∞:**
[–û–ø–∏—Å–∞–Ω–∏–µ]

**–ö–æ–¥:**
```php
// –¢–µ–∫—É—â–∏–π –∫–æ–¥
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```php
// –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥
```
```
